# Repository Guidelines

## Project Structure & Module Organization
Core POS UI lives in `index.html` and `login.html`; offline support comes from `sw.js` and `manifest.json`. Node maintenance scripts (e.g., `analyze_profit.js`, `apply_employee_restrictions.js`, `find_nokia_cost.js`) sit at the root and operate directly on the HTML templates. Store icon assets in `icons/`, keep `node_modules/` generated by npm, and guard the Firebase service account file `africaphone1-accfb-firebase-adminsdk-fbsvc-37efae2abd.json` from accidental distribution.

## Build, Test, and Development Commands
Run `npm install` after cloning to install `firebase-admin`. Use `node apply_employee_restrictions.js` whenever access rules change in `index.html`, and `node analyze_profit.js` or `node find_nokia_cost.js` for reporting (redirect output when needed, e.g., `node analyze_profit.js > reports/profit.txt`). `python fix_line.py` repairs malformed CSV rows prior to import. `npm test` currently exits with status 1; replace this script with real checks before release.

## Coding Style & Naming Conventions
JavaScript utilities use 2-space indentation, camelCase for variables, and guard clauses before mutating files; follow the pattern in `apply_employee_restrictions.js`. HTML IDs remain kebab-case and mirror French UI labels (`nav-tresorerie`, `nav-menu`). Keep console messages actionable and prefer early returns over deeply nested logic when extending scripts.

## Testing Guidelines
No automated suite exists yet, so pair every change with a manual verification list. For scripts that rewrite HTML, test against a copy first and confirm diffs before saving. Capture browser smoke results covering login, employee restrictions, and offline caching, and attach notes or GIFs to the pull request.

## Commit & Pull Request Guidelines
History favors short, imperative subjects—often in French—such as `blocage de détails pour les employés`; keep new commits under 65 characters and focused on one concern. Reference related issues, describe user impact, and enumerate the commands run for validation. UI or data changes should include before/after screenshots or sample output snippets.

## Security & Configuration Tips
Treat the Firebase admin key as sensitive: never email or attach it to issues, and prefer environment variables for new credentials. Avoid committing new artifacts under `reports/` or other ad hoc directories; share exports through secure channels. When syncing dependencies on another machine, run `npm install` instead of copying `node_modules/` to keep secrets out of version control.

Always commit after changes. 